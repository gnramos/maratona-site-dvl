<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Maratona SBC de Programação</title>
    <link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script type="text/javascript" src="../maratona.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      let results = [
[2016, '1ªFase', 777],
[2016, 'Nacional', 60],
[2016, 'Mundial', 6],
[2017, '1ªFase', 814],
[2017, 'Nacional', 72],
[2017, 'Mundial', 7],
[2018, '1ªFase', 745],
[2018, 'Nacional', 71],
[2018, 'Mundial', 6],
[2019, '1ªFase', 721],
[2019, 'Nacional', 60],
[2019, 'Mundial', 9],
[2020, '1ªFase', 798],
[2020, 'Nacional', 64],
[2020, 'Mundial', 5],
[2021, '1ªFase', 532],
[2021, 'Nacional', 60],
[2021, 'Mundial', null],
[2022, '1ªFase', 554],
[2022, 'Nacional', null],
[2022, 'Mundial', null]];
      google.charts.load('current', {packages: ['controls', 'corechart', 'line']});
      google.charts.setOnLoadCallback(function() { drawParticipationResults(results); });

      function drawParticipationResults(results) {
        let YEARS_TO_SHOW = 5;
        let cols = ['Year', 'Phase', 'Teams'];
        results.unshift(cols);
        let lastYear = parseInt(results.slice(-1)[0][0]);
        let firstYear = parseInt(results[0][0]);
        if (firstYear < lastYear - YEARS_TO_SHOW + 1)
          firstYear = lastYear - YEARS_TO_SHOW + 1;

        let data = google.visualization.arrayToDataTable(results);
        let formatNumber = new google.visualization.NumberFormat({pattern: "0"});
        formatNumber.format(data, 0);

        let chart = new google.visualization.ChartWrapper({
          chartType: 'LineChart',
          containerId: 'chart_div',
          options: {hAxis: {title: 'Ano', format: '0'},
                    vAxis: {title: 'Times', format: '0', baseline: 1},
                    legend: 'none',//{position: 'top'},
                    pointSize: 10
                  },
          view: {'columns': [0, 2]}
        })

        let phasePicker = new google.visualization.ControlWrapper({
              'controlType': 'CategoryFilter',
              'containerId': 'phasePicker_div',
              'options': {
                'filterColumnIndex': 1,
                'ui': {
                  'sortValues': false,
                  'label': 'Filtro:',
                  'allowTyping': false,
                  'allowMultiple': false,
                  'allowNone': false
                }
              },
              'state': {'selectedValues': [PHASES[0]]}
            });

        var dashboard = new google.visualization.Dashboard(
            document.getElementById('dashboard_div'));
        dashboard.bind([phasePicker], [chart]);
        dashboard.draw(data);
      }


    </script>
    <script type="text/javascript">
      //======================================================================
      // Editar a partir daqui.
      //======================================================================
      let sites = [ // 'Campo Grande',
                   'Gramado', 'Online',
                   'Campina Grande', 'Salvador', 'Foz do Iguaçu',
                   'Belo Horizonte', 'São Paulo', 'Fortaleza',
                   'Uberlândia', 'Londrina', 'Goiânia',
                   'Joinville', 'Campinas', 'Vila Velha',
                   'Belo Horizonte', 'Rio de Janeiro', 'Ribeirão Preto',
                   'São Paulo', 'Campo Grande', 'São Paulo',
                   'Campinas', 'São Paulo', 'Rio de Janeiro',
                   'São Paulo', 'Campinas', 'Belo Horizonte']; // ordem cronológica inversa

      //======================================================================
      // Não editar a partir daqui.
      //======================================================================

      let listItems = '', accordionItems = [], year;
      for (i in sites) {
        year = 1995 + sites.length - i;  // O 1o evento ocorreu em 1996
        listItems += `\n<li class="list-group-item"><a href="${year}/index.html">${toRoman(year - 1995)} Maratona - ${sites[i]} (${year})</a></li>`;
        if (year % 10 == 0) {
          accordionItems.push([`${year} ~`, `\n<ul class="list-group">${listItems}\n</ul>`]);
          listItems = '';
        }
      }
      accordionItems.push([`${year} ~`, `\n<ul class="list-group">${listItems}\n</ul>`]);
    </script>
  </head>
  <body>
    <script type="text/javascript">
      document.write(bodyHeader('Maratonas Passadas'));
    </script>
    <div id="dashboard_div">
      <div id="chart_div" class="row"></div>
      <div id="phasePicker_div"></div>
    </div>
    <br>
    <script type="text/javascript">
      document.write(accordion('History', accordionItems, [], false));
      document.write(bodyFooter());
    </script>
  </body>
</html>